table = list('  1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30\n1 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n2 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n3 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n4 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n5 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n6 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n7 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n8 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n9 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n10*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n11*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n12*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n13*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n14*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n15*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n16*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n17*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n18*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n19*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n20*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n21*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n22*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n23*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n24*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n25*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n26*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n27*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n28*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n29*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n30*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *')
table_copy = list('  1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30\n1 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n2 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n3 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n4 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n5 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n6 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n7 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n8 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n9 *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n10*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n11*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n12*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n13*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n14*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n15*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n16*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n17*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n18*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n19*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n20*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n21*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n22*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n23*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n24*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n25*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n26*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n27*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n28*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n29*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *\n \n30*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *')
plane_sm_up = 1
plane_sm_down = 1
plane_big_right = 1
index1 = 0
index2 = 0
index3 = 0
turn = 'place'
while turn == 'place':
    print(''.join(table))
    print('planes remaining:')
    if plane_sm_up == 1:
        print('1-3-1-1 (plane_sm_up)')
    if plane_sm_down == 1:
        print('1-1-3-1 (plane_sm_down)')
    if plane_big_right == 1:
        print('1-1-5-1-1 (plane_big_right)')
    index = 1
    plane_select = input('Please select which plane you want to use. ')
    if plane_select == 'plane_sm_up' and plane_sm_up == 1:
        pos1 = input('Please select the first plane\'s position on the AxB grid: ')
        pos_x = pos1.index('x')
        value_A = int(pos1[:pos_x:])
        value_B = int(pos1[pos_x+1::])
        valid_pos = 1
        if value_B <= 1 or value_B >= 28 or value_A <= 1 or value_A >= 29 or table[index] == '+' or table[index-151] == '+' or table[index-5] == '+' or table[index+5] == '+' or table[index+151] == '+' or [index+302] == '+':
            valid_pos = 0
        if valid_pos == 0:
            print('Please select a valid position.')
        else:
            index = 302 + (value_B-2) * 151 + (value_A - 1) * 5
            table[index] = '+'
            table[index-151] = '+'
            table[index-5] = '+'
            table[index+5] = '+'
            table[index+151] = '+'
            table[index+302] = '+'
            index1 = index
            head_su = pos1
            plane_sm_up = 0
    elif plane_select == 'plane_sm_down' and plane_sm_down == 1:
        pos1 = input('Please select the second plane\'s position on the AxB grid: ')
        pos_x = pos1.index('x')
        value_A = int(pos1[:pos_x:])
        value_B = int(pos1[pos_x+1::])
        valid_pos = 1
        if value_B <= 2 or value_B >= 29 or value_A <= 1 or value_A >= 29 or table[index] == '+' or table[index-151] == '+' or table[index-5] == '+' or table[index+5] == '+' or table[index+151] == '+' or [index-302] == '+':
            valid_pos = 0
        if valid_pos == 0:
            print('Please select a valid position.')
        else:
            index = 302 + (value_B-2) * 151 + (value_A - 1) * 5
            table[index] = '+'
            table[index-151] = '+'
            table[index-5] = '+'
            table[index+5] = '+'
            table[index+151] = '+'
            table[index-302] = '+'
            head_sd = pos1
            index2 = index
            plane_sm_down = 0
    elif plane_select == 'plane_big_right' and plane_big_right == 1:
        pos1 = input('Please select the third plane\'s position on the AxB grid: ')
        pos_x = pos1.index('x')
        value_A = int(pos1[:pos_x:])
        value_B = int(pos1[pos_x+1::])
        valid_pos = 1
        if value_B <= 2 or value_B >= 29 or value_A <= 2 or value_A >= 28 or table[index] == '+' or table[index-10] == '+' or table[index-5] == '+' or table[index+5] == '+' or table[index+10] == '+' or [index-302] == '+' or [index-151] == '+' or [index+151] == '+' or [index+302] == '+':
            valid_pos = 0
        if valid_pos == 0:
            print('Please select a valid position.')
        else:
            index = 302 + (value_B-2) * 151 + (value_A - 1) * 5
            table[index] = '+'
            table[index-151] = '+'
            table[index-5] = '+'
            table[index+5] = '+'
            table[index+151] = '+'
            table[index-302] = '+'
            table[index+302] = '+'
            head_br = pos1
            index3 = index
            plane_big_right = 0
    else:
      print('Please select a proper plane.')
    if plane_sm_up == 0 and plane_sm_down == 0 and plane_big_right == 0:
        turn = 'destroy'
print(''.join(table))
print(' \n \n \n \n \n \n \n \n \n \n \n \n \n \n')
print('Now ask player 2 to destroy your ships!')
turns = 5
sunk = 0
while turn == 'destroy' and turns > 0:
    destroy_coords = input('Please insert the AxB coordinates you want to destroy.')
    pos_x = pos1.index('x')
    value_A = int(pos1[:pos_x:])
    value_B = int(pos1[pos_x+1::])
    index = 302 + (value_B-2) * 151 + (value_A - 1) * 5
    if table[index] == '+':
        if index == index3 or index == index2 or index == index1:
            print('Congratulations! You sunk a battleship!')
            sunk += 1
            table_copy[index] = 'H'
        else:
            print('Congratulations! You hit a battleship!')
            table_copy[index] = 'h'
    elif table_copy[index] == 'h':
        print('You already hit this battleship!')
    else:
        print('You missed!')
        turns -= 1
    if sunk == 3:
        turn = 'end'
    print(''.join(table_copy))
if turns == 0:
    print('You have lost! Some of my ships survived!')
elif turn == 'end':
    print('You have won! You sunk all of my battleships!')